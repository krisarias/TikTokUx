<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Main Prototype â€” A/B click tracking</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="stage">

    <div class="device">
      <div class="screen-wrap">
  <img id="screen" src="images/A.Tratamiento/TMain.png" usemap="#phone-map" alt="Interfaz de Tik Tok">
  <!-- heatmap canvas overlays the image (sized by JS) -->
  <canvas id="heatmap"></canvas>

         <!-- coordenadas -->
        <map name="phone-map" id="phone-map">
          <area id="area-back" shape="poly" coords="90,34,20,10,20,58" href="#" alt="Back" data-action="goBack">
          <area id="area-TMsj-back" shape="rect" coords="12,63,34,88" href="#" alt="back" title="back" data-action="goBack">
          <area id="area-msj2" target="" alt="msj2" title="msj2" href="#" coords="18,534,375,592" shape="rect" data-handler="tmsj" data-target="/msj">

          <area id="area-seguidores" target="" alt="Seguidores" title="Seguidores" href="#" coords="84,97,164,122" shape="rect" data-handler="global" data-target="images/A.Tratamiento/TPersonas.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-actividad"  target="" alt="Actividad"  title="Actividad"       href="#" coords="175,98,233,117" shape="rect" data-handler="global" data-target="images/A.Tratamiento/TActv.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-notifsistema" target="" alt="NotifSistema" title="NotifSistema" href="#" coords="250,98,383,116" shape="rect" data-handler="global" data-target="images/A.Tratamiento/TNotfSys.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-denuncias" target="" alt="Denuncias" title="Denuncias" href="#" coords="57,143,148,169" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TSysDen.png" data-enabled="TNotfSys.png">
          <area id="area-actualizaciones" target="" alt="Actualizaciones" title="Actualizaciones" href="#" coords="161,143,370,170" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TNotfSys.png" data-enabled="TSysDen.png">
          <area id="area-TConfig" target="" alt="TConfig" title="TConfig" href="#" coords="352,59,376,80" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TConfig.png" data-enabled="TNotfSys.png">
          <area id="area-TActFltrs" target="" alt="TActFltrs" title="TActFltrs" href="#" coords="244,58,262,76" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TActvFltrs.png" data-enabled="TActv.png">
          <area id="area-TConfigMsj" target="" alt="TConfigMsj" title="TConfigMsj" href="#" coords="233,61,257,73" shape="rect" data-handler="global" data-target="images/A.Tratamiento/TConfigMsj.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-main" target="" alt="Main"      title="Main"            href="#" coords="12,100,76,120" shape="rect" data-handler="global" data-target="images/A.Tratamiento/TMain.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
        </map>

      </div>
    </div>

  <div id="ab-controls" class="ab-controls-centered">
    <div class="ab-variant-row">
      Variant: <strong id="variant-label">?</strong>
      <!-- Image selector: pick one of the available test screens -->
      <div class="ab-image-select">
        <label for="imageSelector" class="label-small">Screen:</label>
        <select id="imageSelector" class="image-selector">
          <option value="images/A.Tratamiento/TMain.png">A.Tratamiento - TMain.png</option>
          <option value="images/A.Tratamiento/TMsj.png">A.Tratamiento - TMsj.png</option>
          <option value="images/A.Tratamiento/TPersonas.png">A.Tratamiento - TPersonas.png</option>
          <option value="images/A.Tratamiento/TNotfSys.png">A.Tratamiento - TNotfSys.png</option>
          <option value="images/A.Tratamiento/TSysDen.png">A.Tratamiento - TSysDen.png</option>
          <option value="images/A.Tratamiento/TConfig.png">A.Tratamiento - TConfig.png</option>
          <option value="images/A.Tratamiento/TActv.png">A.Tratamiento - TActv.png</option>
          <option value="images/A.Tratamiento/TActvFltrs.png">A.Tratamiento - TActvFltrs.png</option>
          <option value="images/A.Tratamiento/TConfigMsj.png">A.Tratamiento - TConfigMsj.png</option>
        </select>
      </div>
        <!-- Cambiar entre prototipo A y B -->
        <div class="ab-toggle" id="variantToggle" role="tablist" aria-label="Variant toggle">
          <button class="ab-btn" data-variant="A" aria-pressed="false">A</button>
          <button class="ab-btn" data-variant="B" aria-pressed="false">B</button>
        </div>
    </div>
  <button id="showCounts" class="control-button">Show counts</button>
  <button id="toggleHeatmap" class="control-button">Toggle heatmap</button>
    <button id="resetCounts" class="control-button">Reset counts</button>
    <button id="exportCounts" class="control-button">Export counts (JSON)</button>
    <div class="muted small-note">se guarda localmente en el navegador</div>
  </div>

  <!-- Counts modal (solo en desktop) -->
  <div class="counts-modal-backdrop" id="counts-backdrop" aria-hidden="true">
    <div class="counts-modal" role="dialog" aria-modal="true" aria-labelledby="counts-title">
      <div class="counts-header">
        <h3 id="counts-title">Click & Event Inspector</h3>
        <div><button id="closeCounts" class="btn-small">Close</button></div>
      </div>

      <div class="summary" id="counts-summary">
        <div class="card">
          <div class="muted">Variant</div>
          <div class="summary-value" id="summary-variant">?</div>
        </div>
        <div class="card">
          <div class="muted">Total clicks (all areas)</div>
          <div id="summary-total" class="summary-value">0</div>
        </div>
        <div class="card">
          <div class="muted">Missclicks</div>
          <div id="summary-miss" class="summary-value">0</div>
        </div>
      </div>

      <div class="counts-flex">
        <div class="flex-1">
          <div class="muted">Per-variant counts</div>
          <pre id="counts-json" class="counts-json-pre">{}</pre>
        </div>
        <div class="events-column">
          <div class="muted">Recent events (latest 50)</div>
          <div class="events" id="events-list"></div>
        </div>
      </div>

      <div class="controls-row">
        <button id="exportCountsJSON">Export counts (JSON)</button>
        <button id="exportEventsCSV">Export events (CSV)</button>
        <button id="clearEvents" class="btn-danger">Clear all data</button>
        <div class="flex-fill"></div>
        <div class="muted">Stored locally in browser</div>
      </div>
    </div>
  </div>

  </div>
  <!-- Task buttons: empezar / terminar -->
  <button id="startTaskBtn" class="task-btn left">Empezar tarea</button>
  <button id="endTaskBtn" class="task-btn right">Terminar tarea</button>

  <script src="prototype_ab.js"></script>
</body>
</html>