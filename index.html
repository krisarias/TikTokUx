<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Main Prototype — A/B click tracking</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="stage">

    <div class="device">
      <div class="screen-wrap">
  <!-- Use a tiny transparent placeholder so the page doesn't always show A before JS assigns variant -->
  <img id="screen" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" usemap="#phone-map" alt="Interfaz de Tik Tok">
  <!-- heatmap canvas overlays the image (sized by JS) -->
  <canvas id="heatmap"></canvas>

         <!-- coordenadas -->
        <map name="phone-map" id="phone-map">
          <!-- Back button-->
          <area id="area-back-msj" shape="rect" coords="12,63,34,88" href="#" alt="back" title="back" data-action="goBack">
         <!--Prototipo A pestañas Main-->
          <area id="area-main" target="" alt="Main"      title="Main"            href="#" coords="12,100,76,120" shape="rect" data-handler="global"               data-target="images/A.Tratamiento/TMain.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-seguidores" target="" alt="Seguidores" title="Seguidores" href="#" coords="84,97,164,122" shape="rect" data-handler="global"             data-target="images/A.Tratamiento/TPersonas.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-actividad"  target="" alt="Actividad"  title="Actividad"       href="#" coords="175,98,233,117" shape="rect" data-handler="global"       data-target="images/A.Tratamiento/TActv.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <area id="area-notifsistema" target="" alt="NotifSistema" title="NotifSistema" href="#" coords="250,98,383,116" shape="rect" data-handler="global"      data-target="images/A.Tratamiento/TNotfSys.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
          <!-- Prototipo A-->
          <area id="area-AFrancini" alt="AFrancini" title="AFrancini" href="#" coords="18,534,375,592" shape="rect" data-handler="tmsj"                           data-target="/msj">
          <area id="area-Adenuncias" target="" alt="ADenuncias" title="ADenuncias" href="#" coords="57,144,149,169"  shape="rect" data-handler="global"            data-target="images/A.Tratamiento/TSysDen.png" data-enabled="TNotfSys.png">
          <area id="area-actualizaciones" target="" alt="Actualizaciones" title="Actualizaciones" href="#" coords="161,143,370,170" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TNotfSys.png" data-enabled="TSysDen.png">
          <area id="area-TConfig"    target="" alt="TConfig" title="TConfig" href="#" coords="352,59,376,80" shape="rect" data-handler="enabled"                     data-target="images/A.Tratamiento/TConfig.png" data-enabled="TNotfSys.png|TSysDen.png">
          <area id="area-TActFltrs"  target="" alt="TActFltrs" title="TActFltrs" href="#" coords="244,58,262,76" shape="rect" data-handler="enabled"               data-target="images/A.Tratamiento/TActvFltrs.png" data-enabled="TActv.png">
          <area id="area-TConfigMsj" target="" alt="TConfigMsj" title="TConfigMsj" href="#" coords="233,61,257,73" shape="rect" data-handler="global"             data-target="images/A.Tratamiento/TConfigMsj.png" data-disabled="TActvFltrs.png|TConfig.png|TConfigMsj.png|TMsj.png">
           <!-- Aequis (A): solo visible en TConfigMsj; vuelve a TMain -->
            <area id="area-aequis" target="" alt="Aequis" title="Aequis" href="#" coords="356,396,376,415" shape="rect" data-handler="enabled" data-target="images/A.Tratamiento/TMain.png" data-enabled="TConfigMsj.png">
          <!-- Prototipo B Main  -->
          <area id="area-cmain-BFrancini" target="" alt="BFrancini" title="BFrancini" href="#" coords="20,363,377,421" shape="rect" data-handler="global"          data-target="images/B.Control/CMsj.png">
          <area id="area-cmain-newfollowers" target="" alt="NewFollowers" title="NewFollowers" href="#" coords="23,224,366,275" shape="rect" data-handler="global" data-target="images/B.Control/C.NuevosSeguidores.png">
          <area id="area-cmain-solicitudmsj" target="" alt="SolicitudMsj" title="SolicitudMsj" href="#" coords="13,570,368,632" shape="rect" data-handler="global" data-target="images/B.Control/CSolicitudMensaje.png">
          <area id="area-cmain-activity" target="" alt="Activity" title="Activity" href="#" coords="20,293,372,354" shape="rect" data-handler="global"             data-target="images/B.Control/C.Actividad.png">
         
          <!-- Prototipo B Configuración -->
          <area id="area-cmain-systemnotif" target="" alt="SystemNotif" title="SystemNotif" href="#" coords="11,500,371,565" shape="rect" data-handler="global"   data-target="images/B.Control/CNotfSys.png">
          <area id="area-Bdenuncias" target="" alt="BDenuncias" title="BDenuncias" href="#" coords="61,107,153,132" shape="rect" data-handler="enabled" data-target="images/B.Control/CSysDen.png" data-enabled="CNotfSys.png|CSysDen.png">
          <area id="area-actualcuenta" target="" alt="ActualCuenta" title="ActualCuenta" href="#" coords="163,105,373,136" shape="rect" data-handler="enabled" data-target="images/B.Control/CNotfSys.png" data-enabled="CSysDen.png">
          <area id="area-rueda" target="" alt="Rueda" title="Rueda" href="#" coords="352,56,377,85" shape="rect" data-handler="enabled" data-target="images/B.Control/CConfig.png" data-enabled="CNotfSys.png|CSysDen.png">
          <!-- Toggle: solo debe aparecer en CMain; lleva a CConfigMsj.png -->
         <area id="area-toggle" target="" alt="toggle" title="toggle" href="#" coords="235,56,262,72" shape="rect" data-handler="enabled" data-target="images/B.Control/CConfigMsj.png" data-enabled="CMain.png">
           <!-- Equis: solo en CConfigMsj, vuelve a CMain -->
           <area id="area-equis" target="" alt="equis" title="equis" href="#" coords="356,366,380,394" shape="rect" data-handler="enabled" data-target="images/B.Control/CMain.png" data-enabled="CConfigMsj.png">
           <!-- Bfiltros: solo aparece en C.Actividad y lleva a CActvFltrs -->
          <area id="area-bfiltros" target="" alt="Bfiltros" title="Bfiltros" href="#" coords="243,57,264,75" shape="rect" data-handler="enabled" data-target="images/B.Control/CActvFltrs.png" data-enabled="C.Actividad.png">
          </map>

      </div>
    </div>

  <div id="ab-controls" class="ab-controls-centered">
    <div class="ab-variant-row">
      Variant: <strong id="variant-label">?</strong>
      <!-- Image selector: pick one of the available test screens -->
      <div class="ab-image-select">
        <label for="imageSelector" class="label-small">Screen:</label>
        <select id="imageSelector" class="image-selector">
          <option value="images/A.Tratamiento/TMain.png">A.Tratamiento - TMain.png</option>
          <option value="images/A.Tratamiento/TMsj.png">A.Tratamiento - TMsj.png</option>
          <option value="images/A.Tratamiento/TPersonas.png">A.Tratamiento - TPersonas.png</option>
          <option value="images/A.Tratamiento/TNotfSys.png">A.Tratamiento - TNotfSys.png</option>
          <option value="images/A.Tratamiento/TSysDen.png">A.Tratamiento - TSysDen.png</option>
          <option value="images/A.Tratamiento/TConfig.png">A.Tratamiento - TConfig.png</option>
          <option value="images/A.Tratamiento/TActv.png">A.Tratamiento - TActv.png</option>
          <option value="images/A.Tratamiento/TActvFltrs.png">A.Tratamiento - TActvFltrs.png</option>
          <option value="images/A.Tratamiento/TConfigMsj.png">A.Tratamiento - TConfigMsj.png</option>
          
          <option value="images/B.Control/C.Actividad.png">B.Control - CActv.png</option>
          <option value="images/B.Control/C.NuevosSeguidores.png">B.Control - NuevosSeguidores.png</option>
          <option value="images/B.Control/CSolicitudMensaje.png">B.Control - CSolicitudMensaje.png</option>
          <option value="images/B.Control/CActvFltrs.png">B.Control - CActvFltrs.png</option>
          <option value="images/B.Control/CConfig.png">B.Control - CConfig.png</option>
          <option value="images/B.Control/CConfigMsj.png">B.Control - CConfigMsj.png</option>
          <option value="images/B.Control/CMain.png">B.Control - CMain.png</option>
          <option value="images/B.Control/CMsj.png">B.Control - CMsj.png</option>
          <option value="images/B.Control/CNotfSys.png">B.Control - CNotfSys.png</option>
          <option value="images/B.Control/CSysDen.png">B.Control - CSysDen.png</option>
          
        </select>
      </div>
        <!-- Cambiar entre prototipo A y B -->
        <div class="ab-toggle" id="variantToggle" role="tablist" aria-label="Variant toggle">
          <button class="ab-btn" data-variant="A" aria-pressed="false">A</button>
          <button class="ab-btn" data-variant="B" aria-pressed="false">B</button>
        </div>
    </div>
  <button id="showCounts" class="control-button">Show counts</button>
  <button id="toggleHeatmap" class="control-button">Toggle heatmap</button>
    <button id="showClickables" class="control-button">Mostrar clicables (debug)</button>
    <button id="resetCounts" class="control-button">Reset counts</button>
    <button id="exportCounts" class="control-button">Export counts (JSON)</button>
      <a href="results.html" id="openResults" class="control-button" style="text-decoration:none;display:inline-block;margin-left:8px;padding:6px 10px;border-radius:4px;background:#2b6cb0;color:#fff;">Open results</a>
    <div class="muted small-note">se guarda localmente en el navegador</div>
  </div>

  <!-- Counts modal (solo en desktop) -->
  <div class="counts-modal-backdrop" id="counts-backdrop" aria-hidden="true">
    <div class="counts-modal" role="dialog" aria-modal="true" aria-labelledby="counts-title">
      <div class="counts-header">
        <h3 id="counts-title">Click & Event Inspector</h3>
        <div><button id="closeCounts" class="btn-small">Close</button></div>
      </div>

      <div class="summary" id="counts-summary">
        <div class="card">
          <div class="muted">Variant</div>
          <div class="summary-value" id="summary-variant">?</div>
        </div>
        <div class="card">
          <div class="muted">Total clicks (all areas)</div>
          <div id="summary-total" class="summary-value">0</div>
        </div>
        <div class="card">
          <div class="muted">Missclicks</div>
          <div id="summary-miss" class="summary-value">0</div>
        </div>
      </div>

      <div class="counts-flex">
        <div class="flex-1">
          <div class="muted">Per-variant counts</div>
          <pre id="counts-json" class="counts-json-pre">{}</pre>
        </div>
        <div class="events-column">
          <div class="muted">Recent events (latest 50)</div>
          <div class="events" id="events-list"></div>
        </div>
      </div>

      <div class="controls-row">
        <button id="exportCountsJSON">Export counts (JSON)</button>
        <button id="exportEventsCSV">Export events (CSV)</button>
        <button id="clearEvents" class="btn-danger">Clear all data</button>
        <div class="flex-fill"></div>
        <div class="muted">Stored locally in browser</div>
      </div>
    </div>
  </div>

  </div>
  <!-- Task buttons -->
  <button id="startTaskBtn" class="task-btn left">Instrucciones y empezar</button>
  <button id="endTaskBtn" class="task-btn right">Terminar tarea</button>

  <script src="prototype_ab.js"></script>
</body>
</html>