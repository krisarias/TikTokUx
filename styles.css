/* ---------- Base layout ---------- */
body {
  font-family: Arial, sans-serif;
  background: #f2f4f7;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  margin: 0;
}

.stage {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* ---------- Device frame ---------- */
.device {
  background: #111;
  border-radius: 36px;
  padding: 18px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
  max-width: 400px;
  width: 90%;
  height: auto;
}

.screen-wrap {
  position: relative;
  display: inline-block;
  background: #fff;
  border-radius: 28px;
  overflow: hidden;
}

img#screen {
  display: block;
  width: 100%;
  height: auto;
  user-select: none;
  -webkit-user-drag: none;
}

/* ---------- Heatmap overlay ---------- */
#heatmap {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 50;
}

/* Visual overlays that show the clickable areas (purple) */
.area-overlay {
  position: absolute;
  border: 2px solid rebeccapurple;
  background: rgba(147,112,219,0.12); /* light purple fill */
  box-sizing: border-box;
  pointer-events: none; /* let the image map underneath receive clicks */
  z-index: 60; /* above heatmap so areas remain visible */
  transition: box-shadow 120ms ease, transform 120ms ease;
  border-radius: 6px;
}

.area-overlay.circle {
  border-radius: 50%;
}

.area-overlay.poly {
  /* fallback styling for polygonal areas (uses bounding box) */
  outline: none;
}

/* Debug state: stronger visible purple overlays */
.area-overlay.debug-visible {
  border: 3px dashed rebeccapurple;
  background: rgba(147,112,219,0.22);
  box-shadow: 0 8px 24px rgba(147,112,219,0.18);
  transform: translateZ(0) scale(1.0);
}

/* Small on-screen badge used while debugging area clicks */
.area-click-badge {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  background: rgba(58,28,95,0.95);
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  z-index: 99999;
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
  pointer-events: none;
}

/* ---------- Hints and text ---------- */
.hint {
  text-align: center;
  color: #555;
  font-size: 14px;
  margin-top: 12px;
}

/* ---------- RESPONSIVE BEHAVIOR ---------- */

/* Hide A/B controls and counts modal trigger on mobile */
@media (max-width: 768px) {
  #ab-controls,
  #counts-panel,
  .counts-modal-backdrop {
    display: none !important;
  }

  body {
    flex-direction: column;
    padding: 20px;
    height: auto;
  }

  .device {
    width: 100%;
    max-width: 360px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  .hint {
    font-size: 13px;
  }
}

/* Remove the simulated phone ‘black frame’ on small screens (mobile) */
@media (max-width: 768px) {
  .device {
    background: transparent !important;
    padding: 0 !important;
    box-shadow: none !important;
    border-radius: 4px !important;
  }
  /* keep the white app screen visible and slightly rounded */
  .screen-wrap {
    border-radius: 6px !important;
    background: #fff !important;
  }
}

/* ---------- Desktop: pin controls to side ---------- */
@media (min-width: 769px) {
  #ab-controls {
    position: fixed;
    left: 18px;
    top: 50%;
    transform: translateY(-50%);
    display: flex !important;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
    background: rgba(255,255,255,0.98);
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    z-index: 50;
    width: 260px; /* slightly wider to fit toggle + selector */
  }

  /* Only style the control buttons (not the A/B toggle buttons) */
  #ab-controls .control-button {
    display: block;
    margin: 6px 0;
    width: 160px;
    text-align: left;
  }

  #counts-panel {
    position: fixed;
    left: 18px;
    top: calc(50% + 220px);
    width: 260px;
    display: none;
    z-index: 45;
  }
}

/* ---------- Counts modal (desktop only) ---------- */
.counts-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.counts-modal {
  width: 720px;
  max-width: calc(100% - 48px);
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
  padding: 16px;
  color: #111;
}

.counts-modal h3 { margin: 0 0 8px 0; }
.counts-modal .summary { display:flex; gap:12px; margin-bottom:12px; }
.counts-modal .summary .card { flex:1; background:#f8fafc; padding:10px; border-radius:8px; }
.counts-modal pre { background:#f6f8fa; padding:8px; border-radius:6px; max-height:220px; overflow:auto; }
.counts-modal .events { max-height:220px; overflow:auto; }
.counts-modal .controls-row { display:flex; gap:8px; flex-wrap:wrap; margin-top:12px; }
.counts-modal .muted { color:#666; font-size:13px; }

@media (max-width: 1024px) {
  .counts-modal { width: 92%; }
}

/* ---------- A/B toggle styling ---------- */
.ab-toggle {
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  overflow: hidden;
  display: inline-flex;
  gap: 6px;
  vertical-align: middle;
}
.ab-toggle .ab-btn {
  appearance: none;
  -webkit-appearance: none;
  border: 0;
  background: #fff;
  padding: 6px 10px;
  font-weight: 700;
  cursor: pointer;
  color: #0b1220;
}
.ab-toggle .ab-btn:first-child { border-right: 1px solid #e6eef5; }
.ab-toggle .ab-btn.active,
.ab-toggle .ab-btn[aria-pressed="true"] {
  background: #0ea5a4;
  color: #fff;
}

/* Improve layout for active button to avoid visual shift */
.ab-toggle .ab-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  line-height: 1;
  padding: 6px 12px; /* slightly wider for touch targets */
  min-height: 34px;
  border-radius: 6px;
  transition: background-color 120ms ease, color 120ms ease, transform 80ms ease, box-shadow 120ms ease;
}

.ab-toggle .ab-btn.active,
.ab-toggle .ab-btn[aria-pressed="true"] {
  transform: translateY(0);
  box-shadow: inset 0 -2px 0 rgba(0,0,0,0.06);
}

/* Controls moved out of HTML inline styles */
.ab-controls-centered { text-align: center; margin-top: 10px; }
.ab-variant-row { margin-bottom: 6px; display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.ab-image-select { margin-top:6px; }
.label-small { font-size:13px; margin-right:6px; }
.image-selector { min-width:160px; padding:4px 6px; font-size:13px; }
.control-button { margin-right:8px; padding:6px 8px; }
.small-note { margin-top:8px; font-size:13px; color:#666; }

/* Task buttons */
.task-btn { position:fixed; bottom:12px; padding:10px 14px; background:#0b74de; color:#fff; border:none; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.2); cursor:pointer; z-index:9999; }
.task-btn.right { right:12px; background:#e53935; }
.task-btn.left { left:12px; }

/* Backup note styling (index.backup.html) */
.backup-note { padding:16px; font-family: system-ui, 'Segoe UI', Arial, sans-serif; }

/* Small helper styles used by JS-created modals */
.muted { color:#666; font-size:13px; }

/* Counts modal helpers moved from inline styles */
.counts-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.btn-small { padding:6px 8px; }
.summary-value { font-weight:700; font-size:18px; }
.counts-flex { display:flex; gap:12px; }
.flex-1 { flex:1; }
.counts-json-pre { white-space:pre-wrap; font-size:13px; color:#111; margin-top:6px; }
.events-column { width:320px; }
.events { margin-top:6px; font-size:13px; max-height:220px; overflow:auto; }
.btn-danger { background:#ffecec; border:1px solid #f5c2c2; padding:6px 8px; }
.flex-fill { flex:1; }

/* --------- JS-created modal & controls (moved from inline styles) --------- */
.js-modal-backdrop {
  position: fixed;
  left: 0; top: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}
.js-modal-box {
  background: #fff;
  border-radius: 8px;
  padding: 14px;
  width: min(640px, 92%);
  box-shadow: 0 8px 30px rgba(0,0,0,0.35);
  color: #111;
}
.modal-title { margin-top: 0; }
.js-modal-textarea { width: 100%; margin-bottom: 8px; font-family: inherit; font-size: 14px; }
.js-modal-row { display:flex; gap:8px; }
.info-text { font-size:13px; color:#444; margin-bottom:8px; }

/* Buttons used by JS-created modals */
.btn-primary { padding:8px 12px; background:#0b74de; color:#fff; border:none; border-radius:6px; cursor:pointer; }
.btn-secondary { padding:8px 12px; border:1px solid #ccc; border-radius:6px; background:#fff; cursor:pointer; }
.btn-close { padding:8px 12px; border:1px solid #ccc; border-radius:6px; background:#fff; cursor:pointer; }

/* Toast created by JS */
.app-toast {
  position: fixed;
  left: 50%;
  bottom: 20px;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: 10px 14px;
  border-radius: 8px;
  z-index: 20000;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  opacity: 0;
  transition: opacity 220ms ease;
}

/* Event list item in counts modal */
.event-item { padding: 6px 8px; border-bottom: 1px solid #f1f5f9; font-size:13px; }

/* Paragraph inside JS modals preserving whitespace */
.modal-paragraph { white-space: pre-wrap; margin-bottom:12px; }

/* Small label for miss events (used in events list) */
.miss-label { color: #c00; font-weight: 700; }

/* Results page specific styles (moved from results.html) */
.container { max-width: 980px; margin: 28px auto; padding: 16px; }
.dropzone { border: 2px dashed #bbb; padding: 24px; text-align: center; border-radius: 8px; background: #fafafa; }
.dropzone-note { margin-bottom: 8px; }
.file-input { margin-top: 8px; }
table.results-table, table { width: 100%; border-collapse: collapse; margin-top: 16px; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
th { background: #f5f5f5; }
.details { white-space: pre-wrap; font-family: monospace; display: none; background: #fff; padding: 8px; border: 1px solid #eee; margin-top: 8px; }
.controls-row { margin-top: 12px; }
.section-title { margin-top: 20px; }
.btn-back { margin-left: 8px; text-decoration: none; display: inline-block; padding: 6px 10px; border-radius: 4px; background: #e2e8f0; color: #000; }



